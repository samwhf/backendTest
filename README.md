# Backend Developer Test

A RESTful API that can `get/create/update/delete` user data from a persistence database

## Requirement

* [GoLang](https://golang.org/)
* [PostgreSql](https://www.postgresql.org/)

## Design
### structure
```
.
├── Makefile                    // makefile to build, run, test, docker etc.
├── README.md                   // README.md
├── api
│   └── routes.go               // routes, adapter etc.
├── bin
│   └── user                    // bin file
├── common                      // common components
│   ├── args
│   │   └── constant.go
│   ├── middleware
│   │   └── requestid.go
│   └── responder
│       └── usererrors.go
├── config                      // configuration
│   ├── config.go
│   └── flags
│       └── flags.go
├── database                    // database: postgres, mongodb, redis
│   └── postgres
│       └── postgres.go
├── docs                        //swagger for an online demo and api doc
│   ├── docs.go
│   ├── swagger.json
│   └── swagger.yaml
├── go.mod
├── go.sum
├── handlers                    // api handlers
│   └── user
│       └── handler.go
├── main.go
├── objects                     // models
│   └── user.go
├── services                    // persistence services 
│   └── user
│       └── service.go
├── tests                       // unit tests
│   ├── user_handler_test.go
│   └── user_service_test.go
```
### framework

+ web: **gin**
+ orm: **gorm**
+ test: **goconvey**、**monkey**
+ api_doc and online demo:**swagger**

## Installation

Building the application
```sh
$ make build
```

## How to run
### Run Local
> **.env.dev** file configures the local dev environment
```sh
$ go run main.go -env .env.dev
```
> the program will auto create table to db with {DB_NAME} in .env file
```sh
$ ./bin/user -env .env.dev
```

### Running Unit Test
> **.env.test** file configures the unit test environment
```sh
$ go test -v ./tests/...
```

## API Documentation

Documentation can be accessed via `http://localhost:8080/api-docs/index.html`

```
[GIN-debug] GET    /api/v1/user/:id          --> github.com/samwhf/backendTest/handlers/user.Get (5 handlers)
[GIN-debug] POST   /api/v1/user              --> github.com/samwhf/backendTest/handlers/user.Create (5 handlers)
[GIN-debug] PUT    /api/v1/user/:id          --> github.com/samwhf/backendTest/handlers/user.Update (5 handlers)
[GIN-debug] DELETE /api/v1/user/:id          --> github.com/samwhf/backendTest/handlers/user.Delete (5 handlers)
[GIN-debug] GET    /api-docs/*any            --> github.com/swaggo/gin-swagger.CustomWrapHandler.func1 (5 handlers)
```

### Auto Generate Swagger
Swagger documentation via code comment and autogenerated using [swaggo](https://github.com/swaggo/swag). Run the command below to generate documentation

```sh
$ swag init
```

## Running as Docker

> support in the future...